<ion-header style="display: none;" [translucent]="true">
  <ion-toolbar color="light" mode="ios">
    <ion-buttons slot="start" style="margin-left:10px">
      <ion-back-button text="" color="dark"
        defaultHref="/menu/{{restaurant}}?token={{session}}">
      </ion-back-button>
    </ion-buttons>

    <ion-title style="font-weight:bold;font-size:18px;font-style:italic">
      Carrito
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
 <div style="position: absolute; top: 7px; left: 2%;z-index: 999999999999999999999;">
      <div (click)="goBackx()"
       style="width: 43px;height: 43px;background: rgb(233 233 233 / 54%);; border-radius: 50%; padding: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);">
        <ion-icon name="arrow-back-outline" style="font-size: 24px; color: rgb(0, 0, 0);"></ion-icon>
      </div>
    </div>
  <!-- INFO RESTAURANTE -->
<div  style="padding-top: 20px;font-size: 20px;width: 100%;
    font-style: italic;text-align: center;color: #000;">Resumen del carrito</div>


  <div class="restaurant-title" style="margin-top: 30px;font-size: 20px;">{{ nombreRestaurant }}</div>

  <div class="cart-summary" style="margin-top: 6px;color: #363636;margin-bottom: 0px;padding-bottom: 4px;">
    <span>{{ itemCount }} artículos • Subtotal: ${{ precioTotal }}</span>
  </div>

  <!-- SKELETONS (NO TOCADOS, SOLO ENVUELTOS) -->
  <div *ngIf="itemCount === 0" class="card">
    <ion-list lines="none">
      <ion-item *ngFor="let i of [1,2,3,4,5,6,7,8]">
        <ion-label>
          <ion-skeleton-text animated class="my-skeleton" style="width:80%"></ion-skeleton-text>
          <ion-skeleton-text animated class="my-skeleton" style="width:60%;margin-top:6px"></ion-skeleton-text>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>

  <!-- NOTA (SIEMPRE VISIBLE) -->
  <div *ngIf="itemCount !== 0" class="card">
    <div class="note-title" style="color: black;">Agregar una nota al pedido</div>
    <ion-textarea
     style="color: black;"
      placeholder="Agregar una nota..."
      [(ngModel)]="notaPedido">
    </ion-textarea>
  </div>

  <!-- PRODUCTOS -->
  <div *ngIf="itemCount !== 0">
    <div *ngFor="let product of cartItems" class="product-card">

      <ion-avatar>
        <img [src]="product.img">
      </ion-avatar>

      <div class="product-info">
        <div class="category">{{ product.category }}</div>
        <div class="name">{{ product.name }}</div>
        <div class="desc">{{ product.tptxt }}</div>
        <div class="price">${{ product.price * product.quantity }}</div>
      </div>

      <div class="qty-control" style="height: 45px;">
        <ion-button style="--padding-end: 10px;" fill="clear" (click)="decreaseQuantity(product)">
          <ion-icon style="font-size: 23px;" name="remove-circle-outline"></ion-icon>
        </ion-button>
        <span style="color: black;--padding-start: 10px;">{{ product.quantity }}</span>
        <ion-button style="--padding-start: 7px;" fill="clear" (click)="increaseQuantity(product)">
          <ion-icon style="font-size: 23px;" name="add-circle-outline"></ion-icon>
        </ion-button>
      </div>

    </div>
  </div>

  <!-- BOTÓN INFERIOR -->
  <div *ngIf="itemCount !== 0" class="bottom-bar">
    <ion-button expand="full" shape="round" color="dark" (click)="goFinish()">
      <span style="color: white;width: 100%;text-align: center;">Continuar x ${{ getFormattedPrice(precioTotal) }}</span>
      <div class="count">{{ itemCount }}</div>
    </ion-button>
  </div>

  <div style="height:120px"></div>

</ion-content>
